<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jonathan Jose Rangel Betancourt | Enlaces Profesionales</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1a365d;
            --primary-dark: #0f2240;
            --primary-light: #2d4a7c;
            --accent-color: #d4af37;
            --accent-dark: #b8941f;
            --accent-light: #e6c85c;
            --text-light: #f5f5f5;
            --text-gray: #cccccc;
            --bg-dark: #0a0f1c;
            --bg-card: rgba(18, 25, 40, 0.95);
            --border-light: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.6);
            --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --gradient: linear-gradient(135deg, #1a365d 0%, #0f2240 50%, #152642 100%);
            --whatsapp-color: #25d366;
            --dropbox-color: #0061ff;
            --cart-color: #28a745;
            --paypal-color: #0070ba;
            --success-color: #4CAF50;
            --error-color: #f44336;
            --discount-color: #ff6b6b;
            --windows7-color: #1BA1E2;
            --windows8-color: #FF8C00;
            --windows10-color: #0078D7;
            --windows11-color: #5EBB4C;
            --office-color: #D83B01;
            --programs-color: #107C10;
            --design-color: #9B4F96;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Raleway', sans-serif;
            background: var(--gradient);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Contenedor principal */
        .main-container {
            text-align: center;
            padding: 50px 40px;
            border-radius: 24px;
            background: var(--bg-card);
            box-shadow: 0 25px 50px var(--shadow-color), 
                        0 0 0 1px rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid var(--border-light);
            max-width: 900px;
            width: 100%;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        .main-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.15) 0%, rgba(0, 0, 0, 0) 70%);
            z-index: -1;
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }

        /* Líneas decorativas */
        .decoration-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
            left: 10%;
            right: 10%;
            opacity: 0.7;
        }

        .decoration-line.top {
            top: 30px;
        }

        .decoration-line.bottom {
            bottom: 30px;
        }

        /* Sección de perfil mejorada */
        .profile-section {
            margin-bottom: 40px;
        }

        h1 {
            font-family: 'Montserrat', sans-serif;
            font-size: 2.3em;
            font-weight: 700;
            margin-bottom: 25px;
            color: var(--text-light);
            letter-spacing: 1.5px;
            position: relative;
            display: inline-block;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: var(--accent-color);
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .description {
            font-size: 1.15em;
            margin-bottom: 35px;
            color: var(--text-gray);
            padding: 0 15px;
            line-height: 1.7;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .initials-badge {
            display: inline-block;
            background: var(--accent-color);
            color: var(--primary-dark);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 700;
            margin-left: 10px;
            letter-spacing: 1px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        /* Grid de enlaces mejorado */
        .links-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .link-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--text-light);
            background: linear-gradient(145deg, rgba(42, 55, 85, 0.9), rgba(26, 35, 58, 0.9));
            padding: 25px 15px;
            border-radius: 16px;
            transition: var(--transition);
            border: 1px solid rgba(212, 175, 55, 0.25);
            font-weight: 500;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.25);
            position: relative;
            overflow: hidden;
            min-height: 130px;
            backdrop-filter: blur(5px);
            cursor: pointer;
        }

        .link-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.15), transparent);
            transition: left 0.7s;
        }

        .link-button:hover::before {
            left: 100%;
        }

        .link-button i {
            font-size: 2em;
            margin-bottom: 12px;
            color: var(--accent-color);
            transition: var(--transition);
        }

        .link-button span {
            font-size: 1em;
            font-weight: 500;
            text-align: center;
        }

        .link-button:hover {
            background: linear-gradient(145deg, rgba(42, 55, 85, 1), rgba(26, 35, 58, 1));
            border-color: var(--accent-color);
            transform: translateY(-8px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.35);
        }

        .link-button:hover i {
            color: var(--accent-light);
            transform: scale(1.2);
        }

        /* Estilos específicos para botones */
        .whatsapp {
            background: linear-gradient(145deg, rgba(37, 211, 102, 0.15), rgba(26, 35, 58, 0.9)) !important;
            border: 1px solid rgba(37, 211, 102, 0.3) !important;
        }

        .whatsapp i {
            color: var(--whatsapp-color) !important;
        }

        .whatsapp:hover {
            background: linear-gradient(145deg, rgba(37, 211, 102, 0.25), rgba(26, 35, 58, 1)) !important;
            border-color: var(--whatsapp-color) !important;
        }

        .dropbox {
            background: linear-gradient(145deg, rgba(0, 97, 255, 0.15), rgba(26, 35, 58, 0.9)) !important;
            border: 1px solid rgba(0, 97, 255, 0.3) !important;
        }

        .dropbox i {
            color: var(--dropbox-color) !important;
        }

        .dropbox:hover {
            background: linear-gradient(145deg, rgba(0, 97, 255, 0.25), rgba(26, 35, 58, 1)) !important;
            border-color: var(--dropbox-color) !important;
        }

        .cart {
            background: linear-gradient(145deg, rgba(40, 167, 69, 0.15), rgba(26, 35, 58, 0.9)) !important;
            border: 1px solid rgba(40, 167, 69, 0.3) !important;
        }

        .cart i {
            color: var(--cart-color) !important;
        }

        .cart:hover {
            background: linear-gradient(145deg, rgba(40, 167, 69, 0.25), rgba(26, 35, 58, 1)) !important;
            border-color: var(--cart-color) !important;
        }

        .paypal {
            background: linear-gradient(145deg, rgba(0, 112, 186, 0.15), rgba(26, 35, 58, 0.9)) !important;
            border: 1px solid rgba(0, 112, 186, 0.3) !important;
        }

        .paypal i {
            color: var(--paypal-color) !important;
        }

        .paypal:hover {
            background: linear-gradient(145deg, rgba(0, 112, 186, 0.25), rgba(26, 35, 58, 1)) !important;
            border-color: var(--paypal-color) !important;
        }

        /* Footer */
        .footer {
            margin-top: 30px;
            font-size: 0.9em;
            color: var(--text-gray);
            padding-top: 20px;
            border-top: 1px solid var(--border-light);
        }

        .watermark {
            position: absolute;
            bottom: 15px;
            right: 20px;
            font-size: 16px;
            color: var(--accent-color);
            opacity: 0.7;
            font-weight: 600;
            letter-spacing: 2px;
        }

        /* Animaciones de entrada */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }
        .delay-6 { animation-delay: 0.6s; }
        .delay-7 { animation-delay: 0.7s; }
        .delay-8 { animation-delay: 0.8s; }
        .delay-9 { animation-delay: 0.9s; }
        .delay-10 { animation-delay: 1.0s; }

        /* Loading states */
        .loading {
            opacity: 0.7;
            pointer-events: none;
            position: relative;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid var(--accent-color);
            border-top: 2px solid transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Clases de utilidad para visibilidad */
        .hidden {
            display: none !important;
        }

        /* Estilos para el modal del carrito */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: var(--bg-card);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-light);
            position: relative;
            animation: modalFadeIn 0.5s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            font-size: 28px;
            font-weight: bold;
            color: var(--accent-color);
            cursor: pointer;
            transition: var(--transition);
            z-index: 1001;
        }

        .close-modal:hover {
            color: var(--accent-light);
            transform: scale(1.2);
        }

        .modal-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8em;
            margin-bottom: 25px;
            color: var(--text-light);
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        .modal-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        .cart-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .cart-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-light);
            margin-bottom: 20px;
        }

        .cart-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
        }

        .cart-tab.active {
            color: var(--accent-color);
            border-bottom: 3px solid var(--accent-color);
        }

        .cart-section {
            display: none;
        }

        .cart-section.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            background: linear-gradient(145deg, rgba(42, 55, 85, 0.7), rgba(26, 35, 58, 0.7));
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: var(--accent-color);
        }

        .product-image {
            width: 120px;
            height: 120px;
            object-fit: contain;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 2px solid var(--accent-color);
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
        }

        .product-name {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-light);
        }

        .product-price {
            color: var(--accent-color);
            font-weight: 700;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .product-description {
            font-size: 0.9em;
            color: var(--text-gray);
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .programs-list {
            font-size: 0.8em;
            color: var(--text-gray);
            margin-bottom: 15px;
            text-align: left;
            width: 100%;
        }

        .programs-list ul {
            list-style-type: none;
            padding-left: 0;
        }

        .programs-list li {
            margin-bottom: 5px;
            position: relative;
            padding-left: 15px;
        }

        .programs-list li:before {
            content: "•";
            color: var(--accent-color);
            position: absolute;
            left: 0;
        }

        .version-selector {
            width: 100%;
            margin-bottom: 15px;
        }

        .version-select {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-light);
            background: rgba(42, 55, 85, 0.7);
            color: var(--text-light);
            font-family: 'Raleway', sans-serif;
            font-size: 0.9em;
        }

        .version-select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .add-to-cart-btn {
            background: var(--accent-color);
            color: var(--primary-dark);
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
        }

        .add-to-cart-btn:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        .cart-items {
            margin-bottom: 30px;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid var(--border-light);
            background: rgba(42, 55, 85, 0.3);
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .cart-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: contain;
            border-radius: 8px;
            border: 1px solid var(--accent-color);
            background: rgba(255, 255, 255, 0.1);
            padding: 5px;
        }

        .cart-item-details {
            text-align: left;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .cart-item-version {
            font-size: 0.8em;
            color: var(--text-gray);
            margin-bottom: 5px;
        }

        .cart-item-price {
            color: var(--accent-color);
            font-weight: 500;
        }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn {
            background: var(--primary-color);
            border: 1px solid var(--accent-color);
            color: var(--text-light);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .quantity-btn:hover {
            background: var(--accent-color);
            color: var(--primary-dark);
        }

        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }

        .remove-item {
            color: var(--error-color);
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.2em;
            padding: 5px;
        }

        .remove-item:hover {
            transform: scale(1.2);
        }

        .cart-summary {
            background: rgba(42, 55, 85, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border-light);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-light);
        }

        .discount-row {
            color: var(--discount-color);
            font-weight: 600;
        }

        .summary-total {
            font-weight: 700;
            font-size: 1.2em;
            color: var(--accent-color);
        }

        .checkout-btn {
            background: var(--success-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1.1em;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            margin-top: 20px;
        }

        .checkout-btn:hover {
            background: #3d8b40;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .checkout-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .checkout-btn:disabled:hover {
            background: #666;
            transform: none;
            box-shadow: none;
        }

        .checkout-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            text-align: left;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-label {
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-input {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--border-light);
            background: rgba(42, 55, 85, 0.5);
            color: var(--text-light);
            font-family: 'Raleway', sans-serif;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .payment-methods {
            background: rgba(42, 55, 85, 0.5);
            padding: 20px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid var(--border-light);
        }

        .payment-methods h3 {
            text-align: center;
            margin-bottom: 15px;
            color: var(--accent-color);
            font-family: 'Montserrat', sans-serif;
        }

        .payment-icons {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }

        .payment-method {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: var(--transition);
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .payment-method:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateY(-3px);
        }

        /* ESTILOS CORREGIDOS PARA SELECCIÓN DE PAGO */
        .payment-method.selected {
            border: 2px solid var(--accent-color);
            background: rgba(212, 175, 55, 0.1);
            transform: scale(1.05);
        }

        .payment-method i {
            font-size: 2em;
            margin-bottom: 8px;
            color: var(--accent-color);
        }

        .payment-method span {
            font-size: 0.8em;
            font-weight: 500;
        }

        .discount-notice {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid var(--discount-color);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }

        .discount-notice i {
            color: var(--discount-color);
            margin-right: 8px;
        }

        .order-summary {
            background: rgba(42, 55, 85, 0.5);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .order-items {
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 15px;
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-light);
        }

        .confirmation-message {
            text-align: center;
            padding: 30px;
            background: rgba(42, 55, 85, 0.5);
            border-radius: 12px;
            margin-top: 20px;
        }

        .confirmation-icon {
            font-size: 3em;
            color: var(--success-color);
            margin-bottom: 15px;
        }

        .empty-cart-message {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
        }

        .empty-cart-icon {
            font-size: 3em;
            margin-bottom: 15px;
            color: var(--text-gray);
        }

        .empty-cart-checkout {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
            grid-column: span 2;
        }

        /* Logos específicos para productos */
        .windows7-logo {
            background: linear-gradient(145deg, var(--windows7-color), #0D7ABA) !important;
            border: 1px solid rgba(27, 161, 226, 0.3) !important;
        }

        .windows8-logo {
            background: linear-gradient(145deg, var(--windows8-color), #E67E00) !important;
            border: 1px solid rgba(255, 140, 0, 0.3) !important;
        }

        .windows10-logo {
            background: linear-gradient(145deg, var(--windows10-color), #0066B4) !important;
            border: 1px solid rgba(0, 120, 215, 0.3) !important;
        }

        .windows11-logo {
            background: linear-gradient(145deg, var(--windows11-color), #4CAF50) !important;
            border: 1px solid rgba(94, 187, 76, 0.3) !important;
        }

        .office-logo {
            background: linear-gradient(145deg, var(--office-color), #C13500) !important;
            border: 1px solid rgba(216, 59, 1, 0.3) !important;
        }

        .programs-logo {
            background: linear-gradient(145deg, var(--programs-color), #0D6B0D) !important;
            border: 1px solid rgba(16, 124, 16, 0.3) !important;
        }

        .design-logo {
            background: linear-gradient(145deg, var(--design-color), #8A4684) !important;
            border: 1px solid rgba(155, 79, 150, 0.3) !important;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .links-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 40px 25px;
                max-width: 95%;
            }
            
            h1 {
                font-size: 1.9em;
            }
            
            .description {
                font-size: 1.05em;
            }
            
            .links-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .link-button {
                padding: 22px 15px;
                min-height: 110px;
            }
            
            .initials-badge {
                display: block;
                margin: 5px auto 0;
                width: fit-content;
            }
            
            .modal-content {
                width: 95%;
                padding: 20px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .checkout-form {
                grid-template-columns: 1fr;
            }
            
            .form-group.full-width {
                grid-column: span 1;
            }
            
            .payment-icons {
                justify-content: center;
            }
            
            .payment-method {
                flex: 0 0 calc(50% - 10px);
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.7em;
            }
            
            .main-container {
                padding: 30px 20px;
            }
            
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .cart-item-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .payment-method {
                flex: 0 0 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Contenedor principal -->
    <div class="main-container">
        <div class="decoration-line top"></div>
        <div class="decoration-line bottom"></div>

        <!-- Marca de agua -->
        <div class="watermark">JJRB</div>

        <!-- Sección de perfil -->
        <div class="profile-section">
            <h1 class="fade-in">JONATHAN JOSE RANGEL BETANCOURT</h1>
            
            <p class="description fade-in">
                "Bienvenido al perfil de Jonathan Jose Rangel Betancourt (JJRB). Este es tu acceso centralizado. 1. Inicio: Información de contacto y Redes Personales. 2. Carrito de Ventas: Compra directa de servicios de software y PC. 3. Finalizar Compra: Procesamiento de pedidos por WhatsApp. 4. Catálogos Guicar: Enlaces a MEGA/Dropbox y redes de Inversiones Guicar 2025."
            </p>
        </div>

        <!-- Grid de enlaces -->
        <div class="links-grid">
            <a href="https://mega.nz/folder/yBo3RLDZ#Dzpc5aAN3oAk70R04dEU6A" class="link-button fade-in delay-1" target="_blank">
                <i class="fas fa-folder-open"></i>
                <span>Catálogo MEGA</span>
            </a>

            <a href="https://wa.me/584122891366" class="link-button whatsapp fade-in delay-2" target="_blank">
                <i class="fab fa-whatsapp"></i>
                <span>WhatsApp Business</span>
            </a>

            <a href="https://www.instagram.com/jonathanra47?igsh=MXc0aGZubHV2bnJodQ==" class="link-button fade-in delay-3" target="_blank">
                <i class="fab fa-instagram"></i>
                <span>Instagram Personal</span>
            </a>

            <a href="https://www.instagram.com/guicar2025?igsh=MXNscDdsd2p0YjAzMA==" class="link-button fade-in delay-4" target="_blank">
                <i class="fab fa-instagram"></i>
                <span>Instagram Guicar</span>
            </a>

            <a href="https://www.tiktok.com/@jonathanrangel4747?_r=1&_t=ZM-91bB6qozXmm" class="link-button fade-in delay-5" target="_blank">
                <i class="fab fa-tiktok"></i>
                <span>TikTok Personal</span>
            </a>

            <a href="https://www.facebook.com/share/1BmzF7wxGw/" class="link-button fade-in delay-6" target="_blank">
                <i class="fab fa-facebook-f"></i>
                <span>Facebook Personal</span>
            </a>

            <a href="https://www.dropbox.com/scl/fo/vsgm98d09f7vqe7vggnb2/h?rlkey=jzw29qz94u6ymx5ats4txw4vr&st=5mcm537l&dl=0" class="link-button dropbox fade-in delay-7" target="_blank">
                <i class="fab fa-dropbox"></i>
                <span>Dropbox</span>
            </a>

            <a href="https://whatsapp.com/channel/0029Vb6ATQT8vd1X5WSMhi22" class="link-button whatsapp fade-in delay-8" target="_blank">
                <i class="fab fa-whatsapp"></i>
                <span>Canal WhatsApp Guicar 2025</span>
            </a>

            <a href="https://www.paypal.me/rangeljo" class="link-button paypal fade-in delay-9" target="_blank">
                <i class="fab fa-paypal"></i>
                <span>PayPal</span>
            </a>

            <a id="cart-button" class="link-button cart fade-in delay-10">
                <i class="fas fa-shopping-cart"></i>
                <span>Carrito de Ventas <span id="cart-count" style="display: none;">(0)</span></span>
            </a>
        </div>

        <!-- Footer -->
        <div class="footer fade-in">
            <p>&copy; 2026 Jonathan Jose Rangel Betancourt (JJRB). Todos los derechos reservados.</p>
        </div>
    </div>

    <!-- Modal del Carrito -->
    <div id="cart-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2 class="modal-title">Carrito de Compras</h2>
            
            <div class="cart-container">
                <div class="cart-tabs">
                    <div class="cart-tab active" data-tab="products">Productos</div>
                    <div class="cart-tab" data-tab="cart">Carrito <span id="tab-cart-count">(0)</span></div>
                    <div class="cart-tab" data-tab="checkout">Finalizar Compra</div>
                </div>
                
                <!-- Sección de Productos -->
                <div id="products-section" class="cart-section active">
                    <div class="products-grid" id="products-grid">
                        <!-- Los productos se cargarán dinámicamente con JavaScript -->
                    </div>
                </div>
                
                <!-- Sección del Carrito -->
                <div id="cart-section" class="cart-section">
                    <div class="cart-items" id="cart-items">
                        <!-- Los elementos del carrito se cargarán dinámicamente con JavaScript -->
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Subtotal:</span>
                            <span id="subtotal">$0.00</span>
                        </div>
                        <div class="summary-row discount-row hidden" id="discount-row">
                            <span>Descuento 30% (Efectivo):</span>
                            <span id="discount-amount">-$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-total">Total:</span>
                            <span class="summary-total" id="total">$0.00</span>
                        </div>
                        <div class="discount-notice">
                            <i class="fas fa-tag"></i>
                            <strong>¡Oferta especial!</strong> Pago en efectivo tiene 30% de descuento
                        </div>
                        <button id="proceed-checkout" class="checkout-btn">Proceder al Pago</button>
                    </div>
                </div>
                
                <!-- Sección de Checkout -->
                <div id="checkout-section" class="cart-section">
                    <form id="checkout-form">
                        <div class="checkout-form">
                            <div class="form-group">
                                <label class="form-label" for="first-name">Nombre</label>
                                <input type="text" id="first-name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="last-name">Apellido</label>
                                <input type="text" id="last-name" class="form-input" required>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label" for="email">Email</label>
                                <input type="email" id="email" class="form-input" required>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label" for="phone">Teléfono</label>
                                <input type="tel" id="phone" class="form-input" required>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label" for="address">Dirección</label>
                                <input type="text" id="address" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="city">Ciudad</label>
                                <input type="text" id="city" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="zip">Código Postal</label>
                                <input type="text" id="zip" class="form-input" inputmode="numeric" pattern="[0-9]*" required>
                            </div>
                            
                            <!-- Método de Pago -->
                            <div class="form-group full-width">
                                <label class="form-label">Método de Pago</label>
                                <div class="payment-methods">
                                    <div class="payment-icons">
                                        <div class="payment-method selected" data-method="transferencia">
                                            <i class="fas fa-university"></i>
                                            <span>Transferencia</span>
                                        </div>
                                        <div class="payment-method" data-method="paypal">
                                            <i class="fab fa-paypal"></i>
                                            <span>PayPal</span>
                                        </div>
                                        <div class="payment-method" data-method="efectivo">
                                            <i class="fas fa-money-bill"></i>
                                            <span>Efectivo</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="order-summary">
                            <h3>Resumen del Pedido</h3>
                            <div class="order-items" id="order-items">
                                <!-- Los elementos del pedido se cargarán dinámicamente con JavaScript -->
                            </div>
                            <div class="summary-row">
                                <span>Subtotal:</span>
                                <span id="order-subtotal">$0.00</span>
                            </div>
                            <div class="summary-row discount-row hidden" id="order-discount-row">
                                <span>Descuento 30%:</span>
                                <span id="order-discount">-$0.00</span>
                            </div>
                            <div class="summary-row">
                                <span>Total:</span>
                                <span id="order-total">$0.00</span>
                            </div>
                        </div>
                        
                        <button type="submit" class="checkout-btn">Confirmar Pedido y Enviar por WhatsApp</button>
                    </form>
                </div>
                
                <!-- Sección de Confirmación -->
                <div id="confirmation-section" class="cart-section">
                    <div class="confirmation-message">
                        <div class="confirmation-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3>¡Pedido Confirmado!</h3>
                        <p>Tu pedido ha sido enviado a WhatsApp Business. Te contactaremos pronto para coordinar el pago y entrega.</p>
                        <p>Número de pedido: <strong id="order-number">JJRB-0001</strong></p>
                        <button id="continue-shopping" class="checkout-btn">Seguir Comprando</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Polyfill para compatibilidad -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.find%2CArray.prototype.includes%2CPromise%2CObject.assign%2CString.prototype.includes"></script>
    
    <script>
        // Variables globales
        let cart = JSON.parse(localStorage.getItem('jjrb-cart')) || [];
        let paymentMethod = 'transferencia';
        
        // SERVICIOS ACTUALIZADOS CON SELECCIÓN DE VERSIONES
        let products = [
            {
                id: 1,
                name: "Instalación de Windows",
                price: 10.00,
                image: "https://upload.wikimedia.org/wikipedia/commons/e/e4/Windows_7_Logo.svg",
                logoClass: "windows7-logo",
                description: "Instalación profesional del sistema operativo Windows con todos los controladores necesarios.",
                versions: [
                    {id: "win7", name: "Windows 7 Professional/Ultimate", price: 10.00},
                    {id: "win8", name: "Windows 8/8.1 Pro", price: 10.00},
                    {id: "win10", name: "Windows 10 Pro", price: 15.00},
                    {id: "win11", name: "Windows 11 Pro", price: 15.00}
                ],
                programs: [
                    "Controladores actualizados",
                    "Paquete de seguridad básico",
                    "Activación permanente",
                    "Actualizaciones de seguridad"
                ]
            },
            {
                id: 2,
                name: "Instalación de Microsoft Office", 
                price: 10.00,
                image: "https://upload.wikimedia.org/wikipedia/commons/5/5f/Microsoft_Office_logo_%282019%E2%80%93present%29.svg",
                logoClass: "office-logo",
                description: "Instalación completa de Microsoft Office con todas las aplicaciones.",
                versions: [
                    {id: "office2010", name: "Office 2010", price: 10.00},
                    {id: "office2013", name: "Office 2013", price: 10.00},
                    {id: "office2016", name: "Office 2016", price: 10.00},
                    {id: "office2019", name: "Office 2019", price: 15.00},
                    {id: "office2021", name: "Office 2021", price: 15.00}
                ],
                programs: [
                    "Word, Excel, PowerPoint",
                    "Outlook, Access, Publisher",
                    "Complementos esenciales",
                    "Activación permanente"
                ]
            },
            {
                id: 3,
                name: "Suite de Programas Esenciales",
                price: 15.00,
                image: "https://cdn-icons-png.flaticon.com/512/732/732222.png",
                logoClass: "programs-logo",
                description: "Paquete completo de programas esenciales para tu PC.",
                versions: [
                    {id: "basic", name: "Paquete Básico", price: 15.00},
                    {id: "advanced", name: "Paquete Avanzado", price: 20.00},
                    {id: "premium", name: "Paquete Premium", price: 25.00}
                ],
                programs: [
                    "Navegadores: Chrome, Firefox, Edge",
                    "Reproductores: VLC, Media Player",
                    "Compresión: WinRAR, 7-Zip",
                    "PDF: Adobe Reader, alternativas",
                    "Utilidades: CCleaner, Antivirus básico"
                ]
            },
            {
                id: 4,
                name: "Suite de Diseño y Multimedia",
                price: 20.00,
                image: "https://cdn-icons-png.flaticon.com/512/1048/1048914.png",
                logoClass: "design-logo",
                description: "Programas profesionales para diseño gráfico y edición multimedia.",
                versions: [
                    {id: "basic", name: "Suite Básica", price: 20.00},
                    {id: "pro", name: "Suite Profesional", price: 30.00},
                    {id: "expert", name: "Suite Experto", price: 40.00}
                ],
                programs: [
                    "Adobe Photoshop CC",
                    "Adobe Premiere Pro",
                    "Corel Draw",
                    "Audacity para audio",
                    "Format Factory para conversión"
                ]
            },
            {
                id: 5,
                name: "Instalación de Antivirus",
                price: 10.00,
                image: "https://cdn-icons-png.flaticon.com/512/2991/2991112.png",
                logoClass: "programs-logo",
                description: "Instalación y configuración de software antivirus profesional.",
                versions: [
                    {id: "avast", name: "Avast Free Antivirus", price: 10.00},
                    {id: "avg", name: "AVG Antivirus", price: 10.00},
                    {id: "bitdefender", name: "Bitdefender", price: 15.00},
                    {id: "kaspersky", name: "Kaspersky", price: 15.00}
                ],
                programs: [
                    "Instalación completa",
                    "Configuración de escaneos programados",
                    "Actualización de bases de datos",
                    "Optimización de rendimiento"
                ]
            },
            {
                id: 6,
                name: "Utilidades del Sistema",
                price: 12.00,
                image: "https://cdn-icons-png.flaticon.com/512/3528/3528692.png",
                logoClass: "programs-logo",
                description: "Programas de optimización y mantenimiento del sistema.",
                versions: [
                    {id: "cleaner", name: "Limpieza y Optimización", price: 12.00},
                    {id: "recovery", name: "Recuperación de Datos", price: 18.00},
                    {id: "backup", name: "Copia de Seguridad", price: 15.00}
                ],
                programs: [
                    "CCleaner Professional",
                    "Defraggler",
                    "Recuva",
                    "Speccy",
                    "Glary Utilities"
                ]
            }
        ];

        // Animación de entrada escalonada
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach(element => {
                element.style.opacity = '1';
            });
            
            // Inicializar el carrito
            initCart();
            
            // Manejar errores de imágenes
            handleImageErrors();
            
            // Configurar detección de errores críticos
            handleCriticalErrors();
            
            // Configurar detección de conexión
            setupOfflineDetection();
            
            // Mejorar accesibilidad
            improveAccessibility();
        });

        // Sistema de Carrito de Compras
        function initCart() {
            // Cargar productos en la sección de productos
            renderProducts();
            
            // Actualizar carrito
            updateCart();
            
            // Configurar eventos
            setupEventListeners();
        }

        function renderProducts() {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // Crear lista de programas
                let programsHTML = '';
                if (product.programs && product.programs.length > 0) {
                    programsHTML = `
                        <div class="programs-list">
                            <ul>
                                ${product.programs.map(program => `<li>${program}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                // Crear selector de versiones si existe
                let versionSelectorHTML = '';
                if (product.versions && product.versions.length > 0) {
                    versionSelectorHTML = `
                        <div class="version-selector">
                            <select class="version-select" data-product-id="${product.id}">
                                ${product.versions.map(version => 
                                    `<option value="${version.id}" data-price="${version.price}">${version.name} - $${version.price.toFixed(2)}</option>`
                                ).join('')}
                            </select>
                        </div>
                    `;
                }
                
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <h3 class="product-name">${product.name}</h3>
                    <div class="product-price">Desde $${product.price.toFixed(2)}</div>
                    <p class="product-description">${product.description}</p>
                    ${versionSelectorHTML}
                    ${programsHTML}
                    <button class="add-to-cart-btn" data-id="${product.id}">Agregar al Carrito</button>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        function setupEventListeners() {
            // Botón del carrito
            document.getElementById('cart-button').addEventListener('click', openCartModal);
            
            // Cerrar modal
            document.querySelector('.close-modal').addEventListener('click', closeCartModal);
            
            // Cerrar modal al hacer clic fuera
            document.getElementById('cart-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeCartModal();
                }
            });
            
            // Tabs del carrito
            document.querySelectorAll('.cart-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
            
            // Agregar productos al carrito
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('add-to-cart-btn')) {
                    const productId = parseInt(e.target.getAttribute('data-id'));
                    const product = products.find(p => p.id === productId);
                    
                    if (product.versions && product.versions.length > 0) {
                        const versionSelect = document.querySelector(`.version-select[data-product-id="${productId}"]`);
                        const selectedOption = versionSelect.options[versionSelect.selectedIndex];
                        const versionId = selectedOption.value;
                        const versionName = selectedOption.text.split(' - ')[0];
                        const versionPrice = parseFloat(selectedOption.getAttribute('data-price'));
                        
                        addToCart(productId, versionId, versionName, versionPrice);
                    } else {
                        addToCart(productId);
                    }
                    e.preventDefault();
                }
            });
            
            // Control de cantidad en el carrito - CORREGIDO PARA VERSIONES
            document.addEventListener('click', function(e) {
                // Botones de aumentar cantidad
                if (e.target.classList.contains('increase-quantity') || 
                    e.target.closest('.increase-quantity')) {
                    const btn = e.target.classList.contains('increase-quantity') ? 
                               e.target : e.target.closest('.increase-quantity');
                    const cartId = btn.getAttribute('data-cart-id');
                    updateQuantity(cartId, 1);
                    e.preventDefault();
                }
                
                // Botones de disminuir cantidad
                if (e.target.classList.contains('decrease-quantity') || 
                    e.target.closest('.decrease-quantity')) {
                    const btn = e.target.classList.contains('decrease-quantity') ? 
                               e.target : e.target.closest('.decrease-quantity');
                    const cartId = btn.getAttribute('data-cart-id');
                    updateQuantity(cartId, -1);
                    e.preventDefault();
                }
                
                // Botones de eliminar producto
                if (e.target.classList.contains('remove-item') || 
                    e.target.closest('.remove-item')) {
                    const element = e.target.classList.contains('remove-item') ? 
                                   e.target : e.target.closest('.remove-item');
                    const cartId = element.getAttribute('data-cart-id');
                    removeFromCart(cartId);
                    e.preventDefault();
                }
            });
            
            // Proceder al checkout
            document.getElementById('proceed-checkout').addEventListener('click', function(e) {
                if (cart.length > 0) {
                    switchTab('checkout');
                    updateOrderSummary();
                } else {
                    showNotification('Tu carrito está vacío. Agrega productos antes de proceder al pago.', 'error');
                }
                e.preventDefault();
            });
            
            // Métodos de pago
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    document.querySelectorAll('.payment-method').forEach(m => {
                        m.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    paymentMethod = this.getAttribute('data-method');
                    updateCartDisplay();
                    updateOrderSummary();
                });
            });
            
            // Formulario de checkout
            document.getElementById('checkout-form').addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateForm()) {
                    processOrder();
                }
            });
            
            // Continuar comprando
            document.getElementById('continue-shopping').addEventListener('click', function(e) {
                switchTab('products');
                closeCartModal();
                e.preventDefault();
            });
        }

        function openCartModal() {
            document.getElementById('cart-modal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            // Asegurarse de que la pestaña correcta esté activa
            switchTab('products');
        }

        function closeCartModal() {
            document.getElementById('cart-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
            // MEJORA UX: Restablecer selectores de versión al cerrar el modal
            resetVersionSelectors();
        }

        function switchTab(tabName) {
            // Desactivar todas las pestañas
            document.querySelectorAll('.cart-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Ocultar todas las secciones
            document.querySelectorAll('.cart-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Activar pestaña seleccionada
            const activeTab = document.querySelector(`.cart-tab[data-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // Mostrar sección seleccionada
            const activeSection = document.getElementById(`${tabName}-section`);
            if (activeSection) {
                activeSection.classList.add('active');
            }
            
            // Actualizar carrito si es necesario
            if (tabName === 'cart') {
                updateCartDisplay();
            } else if (tabName === 'checkout') {
                updateOrderSummary();
                // Actualizar la selección visual del método de pago - CORREGIDO
                document.querySelectorAll('.payment-method').forEach(m => {
                    m.classList.remove('selected');
                    if (m.getAttribute('data-method') === paymentMethod) {
                        m.classList.add('selected');
                    }
                });
            }
        }

        function addToCart(productId, versionId = null, versionName = null, versionPrice = null) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Producto no encontrado', 'error');
                return;
            }
            
            const price = versionPrice !== null ? versionPrice : product.price;
            const finalName = versionName !== null ? `${product.name} - ${versionName}` : product.name;
            
            // Crear cartId único combinando productId y versionId
            const cartId = versionId ? `${productId}-${versionId}` : `${productId}`;
            
            const existingItemIndex = cart.findIndex(item => item.cartId === cartId);
            
            if (existingItemIndex !== -1) {
                cart[existingItemIndex].quantity += 1;
            } else {
                cart.push({
                    cartId: cartId,
                    id: product.id,
                    name: finalName,
                    originalName: product.name,
                    versionId: versionId,
                    versionName: versionName,
                    price: price,
                    image: product.image,
                    logoClass: product.logoClass,
                    quantity: 1,
                    programs: product.programs || []
                });
            }
            
            saveCart();
            updateCart();
            updateCartDisplay();
            
            // Mostrar mensaje de confirmación
            showNotification(`${finalName} agregado al carrito`);
        }

        // FUNCIONES CORREGIDAS PARA MANEJAR VERSIONES CON cartId ÚNICO
        function updateQuantity(cartId, change) {
            const item = cart.find(item => item.cartId === cartId);
            
            if (!item) {
                showNotification('Producto no encontrado en el carrito', 'error');
                return;
            }
            
            item.quantity += change;
            
            if (item.quantity <= 0) {
                removeFromCart(cartId);
            } else {
                saveCart();
                updateCart();
                updateCartDisplay();
                // Si estamos en checkout, actualizar también el resumen
                if (document.getElementById('checkout-section').classList.contains('active')) {
                    updateOrderSummary();
                }
            }
        }

        function removeFromCart(cartId) {
            const itemIndex = cart.findIndex(item => item.cartId === cartId);
            
            if (itemIndex === -1) {
                showNotification('Producto no encontrado en el carrito', 'error');
                return;
            }
            
            const removedProduct = cart[itemIndex];
            cart.splice(itemIndex, 1);
            saveCart();
            updateCart();
            updateCartDisplay();
            
            // Si estamos en checkout, actualizar también el resumen
            if (document.getElementById('checkout-section').classList.contains('active')) {
                updateOrderSummary();
            }
            
            showNotification(`${removedProduct.name} eliminado del carrito`);
        }

        function updateCart() {
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            const cartCountElement = document.getElementById('cart-count');
            const tabCartCountElement = document.getElementById('tab-cart-count');
            
            if (cartCount > 0) {
                cartCountElement.textContent = `(${cartCount})`;
                cartCountElement.style.display = 'inline';
                tabCartCountElement.textContent = `(${cartCount})`;
            } else {
                cartCountElement.style.display = 'none';
                tabCartCountElement.textContent = '(0)';
            }
        }

        function updateCartDisplay() {
            const cartItemsContainer = document.getElementById('cart-items');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart-message">
                        <div class="empty-cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>Tu carrito está vacío</h3>
                        <p>Agrega algunos productos para continuar.</p>
                    </div>
                `;
                
                document.getElementById('subtotal').textContent = '$0.00';
                document.getElementById('total').textContent = '$0.00';
                document.getElementById('discount-row').classList.add('hidden');
                document.getElementById('proceed-checkout').disabled = true;
                return;
            }
            
            let cartHTML = '';
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                // BOTONES CORREGIDOS CON cartId ÚNICO
                cartHTML += `
                    <div class="cart-item ${item.logoClass || ''}">
                        <div class="cart-item-info">
                            <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                            <div class="cart-item-details">
                                <div class="cart-item-name">${item.originalName || item.name}</div>
                                ${item.versionName ? `<div class="cart-item-version">Versión: ${item.versionName}</div>` : ''}
                                <div class="cart-item-price">$${item.price.toFixed(2)} c/u</div>
                            </div>
                        </div>
                        <div class="cart-item-controls">
                            <div class="quantity-control">
                                <button class="quantity-btn decrease-quantity" 
                                        data-cart-id="${item.cartId}" 
                                        title="Reducir cantidad">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="quantity-btn increase-quantity" 
                                        data-cart-id="${item.cartId}" 
                                        title="Aumentar cantidad">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="remove-item" 
                                 data-cart-id="${item.cartId}" 
                                 title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            cartItemsContainer.innerHTML = cartHTML;
            
            // Calcular descuento si es pago en efectivo
            let discount = 0;
            let total = subtotal;
            
            if (paymentMethod === 'efectivo') {
                discount = subtotal * 0.30;
                total = subtotal - discount;
                document.getElementById('discount-row').classList.remove('hidden');
                document.getElementById('discount-amount').textContent = `-$${discount.toFixed(2)}`;
            } else {
                document.getElementById('discount-row').classList.add('hidden');
            }
            
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;
            document.getElementById('proceed-checkout').disabled = false;
        }

        function updateOrderSummary() {
            const orderItemsContainer = document.getElementById('order-items');
            const checkoutBtn = document.querySelector('#checkout-form button[type="submit"]');
            
            if (cart.length === 0) {
                orderItemsContainer.innerHTML = `
                    <div class="empty-cart-checkout">
                        <div class="empty-cart-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3>No hay productos en el carrito</h3>
                        <p>Agrega algunos productos para continuar.</p>
                    </div>
                `;
                document.getElementById('order-subtotal').textContent = '$0.00';
                document.getElementById('order-total').textContent = '$0.00';
                document.getElementById('order-discount-row').classList.add('hidden');
                
                // Deshabilitar botón de confirmar pedido
                if (checkoutBtn) {
                    checkoutBtn.disabled = true;
                }
                return;
            }
            
            let orderHTML = '';
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                orderHTML += `
                    <div class="order-item">
                        <span>${item.name} x${item.quantity}</span>
                        <span>$${itemTotal.toFixed(2)}</span>
                    </div>
                `;
            });
            
            // Calcular descuento si es pago en efectivo
            let discount = 0;
            let total = subtotal;
            
            if (paymentMethod === 'efectivo') {
                discount = subtotal * 0.30;
                total = subtotal - discount;
                document.getElementById('order-discount-row').classList.remove('hidden');
                document.getElementById('order-discount').textContent = `-$${discount.toFixed(2)}`;
            } else {
                document.getElementById('order-discount-row').classList.add('hidden');
            }
            
            orderItemsContainer.innerHTML = orderHTML;
            document.getElementById('order-subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('order-total').textContent = `$${total.toFixed(2)}`;
            
            // Habilitar botón de confirmar pedido
            if (checkoutBtn) {
                checkoutBtn.disabled = false;
            }
        }

        function validateForm() {
            const firstName = document.getElementById('first-name').value.trim();
            const lastName = document.getElementById('last-name').value.trim();
            const email = document.getElementById('email').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const address = document.getElementById('address').value.trim();
            const city = document.getElementById('city').value.trim();
            const zip = document.getElementById('zip').value.trim();

            if (!firstName || !lastName || !email || !phone || !address || !city || !zip) {
                showNotification('Por favor completa todos los campos requeridos', 'error');
                return false;
            }

            // Validación básica de email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showNotification('Por favor ingresa un email válido', 'error');
                return false;
            }

            return true;
        }

        function processOrder() {
            // 1. Recopilar datos del cliente
            const firstName = document.getElementById('first-name').value;
            const lastName = document.getElementById('last-name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            const city = document.getElementById('city').value;
            const zip = document.getElementById('zip').value;
            
            // 2. Generar número de pedido
            const orderNumber = 'JJRB-' + Math.floor(1000 + Math.random() * 9000);
            
            // 3. Calcular totales
            let subtotal = 0;
            cart.forEach(item => {
                subtotal += item.price * item.quantity;
            });
            
            let discount = 0;
            let total = subtotal;
            
            if (paymentMethod === 'efectivo') {
                discount = subtotal * 0.30;
                total = subtotal - discount;
            }
            
            // 4. Crear mensaje para WhatsApp
            let message = `🛒 *NOTA DE VENTA - PEDIDO ${orderNumber}* 🛒%0A%0A`;
            message += `👤 *INFORMACIÓN DEL CLIENTE:*%0A`;
            message += `▫️ Nombre: ${firstName} ${lastName}%0A`;
            message += `▫️ Teléfono: ${phone}%0A`;
            message += `▫️ Email: ${email}%0A`;
            message += `▫️ Dirección: ${address}%0A`;
            message += `▫️ Ciudad: ${city} - ${zip}%0A%0A`;
            
            message += `💳 *MÉTODO DE PAGO: ${paymentMethod.toUpperCase()}*%0A`;
            
            if (paymentMethod === 'efectivo') {
                message += `🎯 *¡30% DE DESCUENTO APLICADO!*%0A`;
            }
            
            message += `%0A📦 *PRODUCTOS SOLICITADOS:*%0A`;
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                message += `${index + 1}. ${item.name}%0A`;
                message += `   Cantidad: ${item.quantity}%0A`;
                message += `   Precio: $${itemTotal.toFixed(2)}%0A`;
                
                // Incluir lista de programas si existe
                if (item.programs && item.programs.length > 0) {
                    message += `   Características incluidas:%0A`;
                    item.programs.forEach(program => {
                        message += `      ▫️ ${program}%0A`;
                    });
                }
                message += `%0A`;
            });
            
            message += `💰 *RESUMEN DE PAGO:*%0A`;
            message += `▫️ Subtotal: $${subtotal.toFixed(2)}%0A`;
            
            if (paymentMethod === 'efectivo') {
                message += `▫️ Descuento (30%): -$${discount.toFixed(2)}%0A`;
            }
            
            message += `💵 *TOTAL A PAGAR: $${total.toFixed(2)}*%0A%0A`;
            
            if (paymentMethod === 'paypal') {
                message += `🔗 *PayPal: https://www.paypal.me/rangeljo*%0A`;
            }
            
            message += `📝 *Nota de venta - Sin impuestos*%0A`;
            message += `🕒 *Hora del pedido: ${new Date().toLocaleString()}*`;
            
            // 5. Limpiar carrito y formulario
            cart = [];
            saveCart();
            updateCart();
            clearCheckoutForm();
            
            // 6. Mostrar confirmación
            document.getElementById('order-number').textContent = orderNumber;
            switchTab('confirmation');
            
            // 7. Abrir WhatsApp Business con el mensaje
            setTimeout(() => {
                window.open(`https://wa.me/584122891366?text=${message}`, '_blank');
            }, 1000);
        }

        function clearCheckoutForm() {
            document.getElementById('checkout-form').reset();
            // Restablecer método de pago por defecto
            document.querySelectorAll('.payment-method').forEach(m => {
                m.classList.remove('selected');
                if (m.getAttribute('data-method') === 'transferencia') {
                    m.classList.add('selected');
                }
            });
            paymentMethod = 'transferencia';
        }

        // MEJORA UX: Función para restablecer selectores de versión
        function resetVersionSelectors() {
            document.querySelectorAll('.version-select').forEach(select => {
                select.selectedIndex = 0;
            });
        }

        function saveCart() {
            localStorage.setItem('jjrb-cart', JSON.stringify(cart));
        }

        function handleImageErrors() {
            document.querySelectorAll('img').forEach(img => {
                img.onerror = function() {
                    this.src = 'https://via.placeholder.com/300x300/1a365d/d4af37?text=Imagen+No+Disponible';
                    this.alt = 'Imagen no disponible';
                };
            });
        }

        function handleCriticalErrors() {
            window.addEventListener('error', function(e) {
                console.error('Error crítico:', e.error);
                showNotification('Ha ocurrido un error inesperado. Por favor, recarga la página.', 'error');
            });

            // Verificar si localStorage está disponible
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
            } catch (e) {
                console.error('localStorage no disponible:', e);
                showNotification('El almacenamiento local no está disponible. Algunas funciones pueden no trabajar correctamente.', 'error');
            }
        }

        function setupOfflineDetection() {
            window.addEventListener('online', function() {
                showNotification('Conexión restaurada', 'success');
            });

            window.addEventListener('offline', function() {
                showNotification('Estás sin conexión. Algunas funciones pueden no estar disponibles.', 'error');
            });
        }

        function improveAccessibility() {
            // Mejorar focus management en el modal
            const modal = document.getElementById('cart-modal');
            const closeBtn = document.querySelector('.close-modal');
            
            modal.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeCartModal();
                }
            });
            
            // Agregar labels ARIA
            document.querySelectorAll('.link-button').forEach(button => {
                button.setAttribute('aria-label', button.querySelector('span').textContent);
            });
        }

        function showNotification(message, type = 'success') {
            // Eliminar notificaciones existentes
            document.querySelectorAll('.custom-notification').forEach(notification => {
                notification.remove();
            });
            
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.className = 'custom-notification';
            
            const backgroundColor = type === 'error' ? 'var(--error-color)' : 'var(--success-color)';
            
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${backgroundColor};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                z-index: 1001;
                font-weight: 500;
                animation: fadeInUp 0.5s ease;
                max-width: 300px;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.5s ease forwards';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }

        // Añadir animación de fadeOut
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from { opacity: 1; transform: translateY(0); }
                to { opacity: 0; transform: translateY(-20px); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>